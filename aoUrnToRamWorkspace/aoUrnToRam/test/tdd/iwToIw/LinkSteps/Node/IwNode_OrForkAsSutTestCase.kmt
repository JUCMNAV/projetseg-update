package aoUrnToRam::Test;

require kermeta
require "platform:/resource/aoUrnToRam/test/tdd/iwToIw/LinkSteps/TestHelper.kmt"

using kermeta::standard
using kermeta::kunit
using intermediateWorkflow

class LinkSteps_IwNode_OrForkAsSutTestCase inherits TestCase,LinkSteps_TestHelper
{
	reference concern:IwConcern
	reference workflow:IwWorkflow
	reference currentStep:IwStep
	reference sut:IwNode
	reference nextNode1:IwNode 
	reference nextNode2:IwNode
	
	method setUp() is do
		concern:= createIwConcern
    	workflow:=createIwWorkflow_Concern(concern)
    	currentStep:=createIwStep_Concern(concern)

		sut:=createIwOrFork_Workflow(workflow)
		nextNode1:=createIwCustomizableNode_Workflow(workflow)
		linkNodes(sut,nextNode1)
		nextNode2:=createIwCustomizableNode_Workflow(workflow)
		linkNodes(sut,nextNode2)
	end
	
	@feature "FeaNamingOfRAMStep"
	operation testDeepFirstSearch_Unexplored_ShouldContinueExploration() is do
		sut.step_DeepFirstSearch(currentStep)
		
		assertEquals(currentStep,nextNode1.step)
		assertEquals(currentStep,nextNode2.step)
	end

	@feature "FeaNamingOfRAMStep"
	operation testDeepFirstSearch_Explored_ShouldStopExploration() is do
		sut.step:=currentStep
		
		sut.step_DeepFirstSearch(currentStep)
		
		assertVoid(nextNode1.step)
		assertVoid(nextNode2.step)
	end
}