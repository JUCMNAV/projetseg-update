package aoUrnToRam::Test;

require kermeta
require "platform:/resource/aoUrnToRam/metamodel/intermediateWorkflow.ecore"

using kermeta::standard
using kermeta::kunit
using intermediateWorkflow

class IwTestFactory
{
	operation createIwModel():IwModel is do
		result:=IwModel.new
	end

	operation createIwConcern():IwConcern is do
		result:=IwConcern.new
		result.name:="theConcern"
	end
	
	operation createIwStep():IwStep is do
		result:=IwStep.new
		result.name:="theStep"
	end

	operation createIwWorkflow():IwWorkflow is do
		result:=IwWorkflow.new
		result.name:="theWorkflow"
	end

	operation createIwInput():IwInput is do
		result:=IwInput.new
		result.name:="theInput"
	end
	
	operation createIwCustomizableNode():IwCustomizableNode is do
		result:=IwCustomizableNode.new
		result.name:="theCustomizableNode"
	end
	
	operation createIwOutput():IwOutput is do
		result:=IwOutput.new
		result.name:="theOutput"
	end

	operation createIwStartPoint():IwStartPoint is do
		result:=IwStartPoint.new
		result.name:="theStartPoint"
		result.startPointType:="global"
	end
	
	operation createIwEndPoint():IwEndPoint is do
		result:=IwEndPoint.new
		result.name:="theEndPoint"
	end
	
	operation createIwOrFork():IwOrFork is do
		result:=IwOrFork.new
		result.name:="theOrFork"
	end
	
	operation createIwStub():IwStub is do
		result:=IwStub.new
		result.name:="theStub"
	end
	
	operation createIwPluginBinding():IwPluginBinding is do
		result:=IwPluginBinding.new
	end

	operation createIwInBinding(stubEntry:IwNodeConnection,pluginStartPoint:IwStartPoint):IwInBinding is do
		result:=IwInBinding.new
		result.stubEntry:=stubEntry
		result.pluginStartPoint:=pluginStartPoint
	end
	
	operation createIwOutBinding(stubExit:IwNodeConnection,pluginEndPoint:IwEndPoint):IwOutBinding is do
		result:=IwOutBinding.new
		result.stubExit:=stubExit
		result.pluginEndPoint:=pluginEndPoint
	end
	
	operation createIwNodeConnection(source:IwNode,target:IwNode):IwNodeConnection is do
		result:=createIwNodeConnection_Unlinked
		result.source:=source
		result.target:=target
	end
	
	//stle:rename createIwNodeConnection to link node
	operation createIwNodeConnection_Unlinked():IwNodeConnection is do
		result:=IwNodeConnection.new
	end
	
	operation createIwNode_DontCareWhichSubclass():IwNode is do
		result:=createIwCustomizableNode
	end

	//stle:prefix or not???
	
	//stle: may become useful
	/*
	operation linkNodesWithIwInBinding(source:IwNode,target:IwNode):IwInBinding is do
		var stub:IwStub init createIwStub
		stub.workflow:=source.workflow
		
		var stubEntry:IwNodeConnection init createIwNodeConnection(source,stub)
		
		var pluginStartPoint:IwStartPoint init createIwStartPoint
		pluginStartPoint.startPointType:="bound"
		pluginStartPoint.workflow:=target.workflow
		createIwNodeConnection(pluginStartPoint,target)
		
		var pluginBinding:IwPluginBinding init createIwPluginBinding
		pluginBinding.stub:=stub
		
		result:=createIwInBinding(stubEntry,pluginStartPoint)
		result.pluginBinding:=pluginBinding
	end
	*/
}