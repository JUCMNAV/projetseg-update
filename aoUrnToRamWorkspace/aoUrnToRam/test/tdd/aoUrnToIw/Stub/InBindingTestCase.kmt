package aoUrnToRam::test;
require "platform:/resource/aoUrnToRam/test/tdd/aoUrnToIw/TestHelper.kmt"

using kermeta::standard
using kermeta::kunit
using oneurn::urncore
using oneurn::ucm::map
using intermediateWorkflow

class AoUrnToIw_InBindingTestCase inherits TestCase,AoUrnToIw_TestHelper {
	reference pluginBinding:PluginBinding
	reference sut:InBinding
	
	method setUp() is do
		pluginBinding:=createPluginBinding
		sut:=createInBinding_PluginBinding(pluginBinding)
		pluginBinding.build
		attachStubEntryAndStartPointToInBinding(sut)
	end
	
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwInBindingToIwPluginStartPoint() is do
		sut.link
	
		assertEquals(sut.startPoint.iwStartPoint, sut.iwInBinding.pluginStartPoint)
	end
	
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwInBindingToIwStubEntry() is do
		sut.link
	
		assertEquals(sut.stubEntry.iwNodeConnection, sut.iwInBinding.stubEntry)
	end	
		
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwInBindingToIwPluginBinding() is do
		sut.link
	
		assertCollectionHasSingleElement(sut.iwInBinding, pluginBinding.iwPluginBinding.inBindings)
	end	
}