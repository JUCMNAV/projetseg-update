package aoUrnToRam::test;
require "platform:/resource/aoUrnToRam/test/tdd/aoUrnToIw/TestHelper.kmt"

using kermeta::standard
using kermeta::kunit
using oneurn::urncore
using oneurn::ucm::map
using intermediateWorkflow

class AoUrnToIw_OutBindingTestCase inherits TestCase,AoUrnToIw_TestHelper {
	reference pluginBinding:PluginBinding
	reference sut:OutBinding
	
	method setUp() is do
		pluginBinding:=createPluginBinding
		sut:=createOutBinding_PluginBinding(pluginBinding)
		pluginBinding.build
		attachStubExitAndEndPointToOutBinding(sut)
	end
	
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwOutBindingToIwPluginStartPoint() is do
		sut.link
	
		assertEquals(sut.endPoint.iwEndPoint, sut.iwOutBinding.pluginEndPoint)
	end
	
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwOutBindingToIwStubEntry() is do
		sut.link
	
		assertEquals(sut.stubExit.iwNodeConnection, sut.iwOutBinding.stubExit)
	end	
		
	@feature "FeaTransformStaticStub"
	operation testLink_ShouldLinkIwOutBindingToIwPluginBinding() is do
		sut.link
	
		assertCollectionHasSingleElement(sut.iwOutBinding, pluginBinding.iwPluginBinding.outBindings)
	end	
}